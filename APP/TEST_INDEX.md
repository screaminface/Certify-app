# üìë –ò–ù–î–ï–ö–° –ù–ê –¢–ï–°–¢–û–í–ò –§–ê–ô–õ–û–í–ï

–ü—ä–ª–µ–Ω —Å–ø–∏—Å—ä–∫ –Ω–∞ —Å—ä–∑–¥–∞–¥–µ–Ω–∏—Ç–µ —Ñ–∞–π–ª–æ–≤–µ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ read-only –ø—Ä–∏ –∏–∑—Ç–∏—á–∞–Ω–µ.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ

```
APP/
‚îú‚îÄ‚îÄ TEST_README.md                           # üìñ –ü—ä–ª–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICKSTART_TESTING.md                    # ‚ö° –ë—ä—Ä–∑ —Å—Ç–∞—Ä—Ç –≥–∏–¥
‚îú‚îÄ‚îÄ run-expiration-test.ps1                  # ü§ñ PowerShell –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îú‚îÄ‚îÄ TEST_expiration_readonly.sql         # üß™ –û—Å–Ω–æ–≤–µ–Ω SQL —Ç–µ—Å—Ç (1 –º–∏–Ω expiry)
‚îÇ   ‚îú‚îÄ‚îÄ TEST_jwt_short_expiry.sql            # üîë JWT —Ç–µ—Å—Ç –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ TEST_short_grace_period.sql          # ‚ö° –ë—ä—Ä–∑ —Ç–µ—Å—Ç (1 –º–∏–Ω grace)
‚îÇ
‚îî‚îÄ‚îÄ src/utils/
    ‚îî‚îÄ‚îÄ testExpirationReadOnly.ts            # üíª TypeScript –∫–ª–∏–µ–Ω—Ç—Å–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ
```

---

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ

### 1. **TEST_README.md** (–ì–ª–∞–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- **–¢–∏–ø:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–†–∞–∑–º–µ—Ä:** ~8 KB
- **–¶–µ–ª:** –ü—ä–ª–Ω–æ —Ä—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∑–∞ –≤—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ
- **–°—ä–¥—ä—Ä–∂–∞:**
  - –û–±—â–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  - –î–µ—Ç–∞–π–ª–Ω–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –≤—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ
  - –û—á–∞–∫–≤–∞–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
  - Troubleshooting
  - –ü—Ä–∏–º–µ—Ä–∏

**–ö–æ–≥–∞ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º:**
- –ó–∞ –ø—ä—Ä–≤–æ –∑–∞–ø–æ–∑–Ω–∞–≤–∞–Ω–µ —Å —Ç–µ—Å—Ç–æ–≤–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞
- –ö–æ–≥–∞—Ç–æ –∏–º–∞—Ç–µ –ø—Ä–æ–±–ª–µ–º–∏ –∏–ª–∏ –≥—Ä–µ—à–∫–∏
- –ó–∞ —Ä–∞–∑–±–∏—Ä–∞–Ω–µ –∫–∞–∫ —Ä–∞–±–æ—Ç–∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∞

---

### 2. **QUICKSTART_TESTING.md** (–ë—ä—Ä–∑ —Å—Ç–∞—Ä—Ç)
- **–¢–∏–ø:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–†–∞–∑–º–µ—Ä:** ~3 KB
- **–¶–µ–ª:** –ù–∞–π-–±—ä—Ä–∑–∏—è—Ç –Ω–∞—á–∏–Ω –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ —Ç–µ—Å—Ç
- **–°—ä–¥—ä—Ä–∂–∞:**
  - 5 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ (1-3 –º–∏–Ω—É—Ç–∏ –≤—Å–µ–∫–∏)
  - –°—Ç—ä–ø–∫–∏ –∑–∞ –≤—Å–µ–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç
  - FAQ

**–ö–æ–≥–∞ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º:**
- –ö–æ–≥–∞—Ç–æ –∏—Å–∫–∞—Ç–µ –±—ä—Ä–∑ —Ç–µ—Å—Ç (2-3 –º–∏–Ω—É—Ç–∏)
- –ö–æ–≥–∞—Ç–æ –∑–Ω–∞–µ—Ç–µ –∫–∞–∫–≤–æ –ø—Ä–∞–≤–∏—Ç–µ
- –ó–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Ç–µ—Å—Ç–≤–∞–Ω–µ

---

### 3. **supabase/TEST_expiration_readonly.sql**
- **–¢–∏–ø:** SQL Test Script
- **–†–∞–∑–º–µ—Ä:** ~7 KB
- **–í—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:** 1-2 –º–∏–Ω—É—Ç–∏
- **–¶–µ–ª:** –¢–µ—Å—Ç–≤–∞ subscription expiration —Å 1 –º–∏–Ω—É—Ç–∞ –∏–∑—Ç–∏—á–∞–Ω–µ
- **–°—ä–¥—ä—Ä–∂–∞:**
  - –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤ tenant –∏ user
  - Subscription –∫–æ–π—Ç–æ –∏–∑—Ç–∏—á–∞ —Å–ª–µ–¥ 1 –º–∏–Ω—É—Ç–∞
  - –§—É–Ω–∫—Ü–∏–∏ –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–∞—Ç—É—Å–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω —Ç–µ—Å—Ç (–∏–∑—á–∞–∫–≤–∞ 70 —Å–µ–∫)
  - Cleanup —Ñ—É–Ω–∫—Ü–∏—è

**–§—É–Ω–∫—Ü–∏–∏:**
- `app.test_check_expiration_status(tenant_id)` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–∞—Ç—É—Å
- `app.test_auto_expiration_check(tenant_id)` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω —Ç–µ—Å—Ç
- `app.test_cleanup_expiration()` - –ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ

**–ö–∞–∫ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º:**
```sql
-- –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
\i supabase/TEST_expiration_readonly.sql

-- –ò–∑—á–∞–∫–∞–π—Ç–µ 70 —Å–µ–∫—É–Ω–¥–∏

-- –ü—Ä–æ–≤–µ—Ä–∫–∞
SELECT * FROM app.test_check_expiration_status(
  (SELECT id FROM app.tenants WHERE code='test-expiry')
);

-- –ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ
SELECT app.test_cleanup_expiration();
```

---

### 4. **supabase/TEST_jwt_short_expiry.sql**
- **–¢–∏–ø:** SQL Configuration & Test
- **–†–∞–∑–º–µ—Ä:** ~5 KB
- **–í—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:** 1 –º–∏–Ω—É—Ç–∞
- **–¶–µ–ª:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ JWT —Å 1 –º–∏–Ω—É—Ç–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç
- **–°—ä–¥—ä—Ä–∂–∞:**
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ JWT expiry
  - –§—É–Ω–∫—Ü–∏–∏ –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ JWT –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  - –¢–µ—Å—Ç –Ω–∞ refresh flow

**–§—É–Ω–∫—Ü–∏–∏:**
- `app.test_jwt_info()` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ JWT token
- `app.test_token_refresh_flow()` - –¢–µ—Å—Ç –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ
- `app.test_expired_jwt_behavior()` - –¢–µ—Å—Ç –Ω–∞ –∏–∑—Ç–µ–∫—ä–ª JWT

**–ö–∞–∫ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º:**
```sql
-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π—Ç–µ JWT expiry –Ω–∞ 60 —Å–µ–∫ (–≤–∏–∂—Ç–µ —Ñ–∞–π–ª–∞)

-- –ò–∑–ø—ä–ª–Ω–µ—Ç–µ
\i supabase/TEST_jwt_short_expiry.sql

-- –ò–∑–ª–µ–∑—Ç–µ –∏ –≤–ª–µ–∑—Ç–µ –æ—Ç–Ω–æ–≤–æ

-- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ JWT
SELECT * FROM app.test_jwt_info();

-- –¢–µ—Å—Ç –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç
SELECT * FROM app.test_expired_jwt_behavior();
```

---

### 5. **supabase/TEST_short_grace_period.sql**
- **–¢–∏–ø:** SQL Test Script (Fast)
- **–†–∞–∑–º–µ—Ä:** ~6 KB
- **–í—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:** 1 –º–∏–Ω—É—Ç–∞
- **–¶–µ–ª:** –°—É–ø–µ—Ä –±—ä—Ä–∑ —Ç–µ—Å—Ç —Å 1 –º–∏–Ω—É—Ç–∞ grace –ø–µ—Ä–∏–æ–¥
- **–°—ä–¥—ä—Ä–∂–∞:**
  - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–∞–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –∫—Ä–∞—Ç—ä–∫ grace (1 –º–∏–Ω –≤–º–µ—Å—Ç–æ 10 –¥–Ω–∏)
  - Subscription –∫–æ–π—Ç–æ –≤–µ—á–µ –µ –∏–∑—Ç–µ–∫—ä–ª
  - Fast –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Å–∞–º–æ 1 –º–∏–Ω—É—Ç–∞ –∏–∑—á–∞–∫–≤–∞–Ω–µ)

**–§—É–Ω–∫—Ü–∏–∏:**
- `app.refresh_entitlement_for_tenant_test_short_grace(tenant_id)` - Refresh —Å –∫—Ä–∞—Ç—ä–∫ grace
- `app.entitlement_me_test_short_grace(tenant_id)` - Entitlement –ø—Ä–æ–≤–µ—Ä–∫–∞
- `app.test_short_grace_period()` - –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ—Å—Ç–∞
- `app.test_check_short_grace_status()` - –ü—Ä–æ–≤–µ—Ä–∫–∞
- `app.test_cleanup_short_grace()` - –ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ

**–ö–∞–∫ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º:**
```sql
-- –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
\i supabase/TEST_short_grace_period.sql
SELECT app.test_short_grace_period();

-- –ò–∑—á–∞–∫–∞–π—Ç–µ ~60 —Å–µ–∫—É–Ω–¥–∏

-- –ü—Ä–æ–≤–µ—Ä–∫–∞
SELECT * FROM app.test_check_short_grace_status();

-- –ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ
SELECT app.test_cleanup_short_grace();
```

**‚ö° –¢–æ–≤–∞ –µ –Ω–∞–π-–±—ä—Ä–∑–∏—è—Ç SQL —Ç–µ—Å—Ç!**

---

### 6. **src/utils/testExpirationReadOnly.ts**
- **–¢–∏–ø:** TypeScript Test Module
- **–†–∞–∑–º–µ—Ä:** ~11 KB
- **–í—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:** 1-2 –º–∏–Ω—É—Ç–∏
- **–¶–µ–ª:** Client-side —Ç–µ—Å—Ç–≤–∞–Ω–µ –æ—Ç –±—Ä–∞—É–∑—ä—Ä–∞
- **–°—ä–¥—ä—Ä–∂–∞:**
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ JWT session
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ entitlement —Å—Ç–∞—Ç—É—Å
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∞–∫–≤–∞–Ω–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞
  - –§–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω output

**–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `testExpirationReadOnly(waitForExpiration)` - –ì–ª–∞–≤–µ–Ω —Ç–µ—Å—Ç
- `testReadOnlyOperation()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ read-only —Ä–µ–∂–∏–º
- `createShortLivedToken()` - Info –∑–∞ JWT –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `formatTestResults(results)` - –§–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏

**Global —Ñ—É–Ω–∫—Ü–∏–∏ (–≤ browser console):**
- `window.testExpirationReadOnly(wait?)` - –¢–µ—Å—Ç —Å/–±–µ–∑ –∏–∑—á–∞–∫–≤–∞–Ω–µ
- `window.testReadOnlyOperation()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ read-only

**–ö–∞–∫ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º:**
```javascript
// –í DevTools Console (F12)

// –ë—ä—Ä–∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
await testExpirationReadOnly(false);

// –° –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∞–∫–≤–∞–Ω–µ
await testExpirationReadOnly(true);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ read-only
await testReadOnlyOperation();
```

**–ò–∑–∏—Å–∫–≤–∞–Ω–∏—è:**
- –ò–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∞–∫–æ –µ –≤ utils/)
- –ê–∫—Ç–∏–≤–Ω–∞ Supabase —Å–µ—Å–∏—è

---

### 7. **run-expiration-test.ps1**
- **–¢–∏–ø:** PowerShell Script
- **–†–∞–∑–º–µ—Ä:** ~5 KB
- **–í—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:** 2-3 –º–∏–Ω—É—Ç–∏
- **–¶–µ–ª:** –ü—ä–ª–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ SQL —Ç–µ—Å—Ç–∞
- **–°—ä–¥—ä—Ä–∂–∞:**
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–∫—Ä—ä–∂–µ–Ω–∏–µ—Ç–æ (Supabase CLI)
  - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ .env –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  - –ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ SQL —Ç–µ—Å—Ç–∞
  - –û–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ –∏–∑—á–∞–∫–≤–∞–Ω–µ (70 —Å–µ–∫)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
  - Cleanup

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `-SupabaseUrl` - URL –Ω–∞ Supabase –ø—Ä–æ–µ–∫—Ç–∞
- `-SupabaseKey` - Service Role Key
- `-WaitForExpiration` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∞–∫–≤–∞–Ω–µ
- `-SkipCleanup` - –ë–µ–∑ cleanup —Å–ª–µ–¥ —Ç–µ—Å—Ç–∞

**–ö–∞–∫ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º:**
```powershell
# –û—Å–Ω–æ–≤–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ
.\run-expiration-test.ps1

# –° –∏–∑—á–∞–∫–≤–∞–Ω–µ
.\run-expiration-test.ps1 -WaitForExpiration

# –ë–µ–∑ cleanup
.\run-expiration-test.ps1 -SkipCleanup

# –ü—ä–ª–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
.\run-expiration-test.ps1 `
  -SupabaseUrl "https://xxx.supabase.co" `
  -SupabaseKey "eyJ..." `
  -WaitForExpiration
```

**–ò–∑–∏—Å–∫–≤–∞–Ω–∏—è:**
- PowerShell 5.1+
- Supabase CLI
- .env.local —Ñ–∞–π–ª (–∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏)

---

## üéØ –ü—Ä–µ–ø–æ—Ä—ä–∫–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ

### –ù–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª?
‚Üí –ó–∞–ø–æ—á–Ω–µ—Ç–µ —Å **QUICKSTART_TESTING.md**

### –ò—Å–∫–∞—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏?
‚Üí –ü—Ä–æ—á–µ—Ç–µ—Ç–µ **TEST_README.md**

### –ù–∞–π-–±—ä—Ä–∑ —Ç–µ—Å—Ç?
‚Üí –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ **TEST_short_grace_period.sql** (1 –º–∏–Ω)

### –¢–µ—Å—Ç –æ—Ç –±—Ä–∞—É–∑—ä—Ä–∞?
‚Üí –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ **testExpirationReadOnly.ts**

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è?
‚Üí –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ **run-expiration-test.ps1**

### JWT —Ç–µ—Å—Ç–≤–∞–Ω–µ?
‚Üí –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ **TEST_jwt_short_expiry.sql**

---

## üîó –í—Ä—ä–∑–∫–∏ –º–µ–∂–¥—É —Ñ–∞–π–ª–æ–≤–µ—Ç–µ

```
QUICKSTART_TESTING.md
    ‚îÇ
    ‚îú‚îÄ‚ñ∫ TEST_short_grace_period.sql (–í–∞—Ä–∏–∞–Ω—Ç 1 - 1 –º–∏–Ω)
    ‚îú‚îÄ‚ñ∫ TEST_expiration_readonly.sql (–í–∞—Ä–∏–∞–Ω—Ç 2 - 2 –º–∏–Ω)
    ‚îú‚îÄ‚ñ∫ TEST_jwt_short_expiry.sql (–í–∞—Ä–∏–∞–Ω—Ç 3 - JWT)
    ‚îú‚îÄ‚ñ∫ testExpirationReadOnly.ts (–í–∞—Ä–∏–∞–Ω—Ç 4 - Client)
    ‚îî‚îÄ‚ñ∫ run-expiration-test.ps1 (–í–∞—Ä–∏–∞–Ω—Ç 5 - Auto)

TEST_README.md
    ‚îÇ
    ‚îú‚îÄ‚ñ∫ –î–µ—Ç–∞–π–ª–Ω–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –≤—Å–∏—á–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∏
    ‚îú‚îÄ‚ñ∫ Troubleshooting
    ‚îî‚îÄ‚ñ∫ –ü—Ä–∏–º–µ—Ä–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ

run-expiration-test.ps1
    ‚îÇ
    ‚îî‚îÄ‚ñ∫ –ò–∑–ø—ä–ª–Ω—è–≤–∞ TEST_expiration_readonly.sql
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ

| –§–∞–π–ª | –¢–∏–ø | –í—Ä–µ–º–µ | –°–ª–æ–∂–Ω–æ—Å—Ç | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |
|------|-----|-------|----------|---------------|
| TEST_short_grace_period.sql | SQL | 1 –º–∏–Ω | –ù–∏—Å–∫–∞ | –ß–∞—Å—Ç–∏—á–Ω–∞ |
| TEST_expiration_readonly.sql | SQL | 2 –º–∏–Ω | –°—Ä–µ–¥–Ω–∞ | –ü—ä–ª–Ω–∞ (70s wait) |
| TEST_jwt_short_expiry.sql | SQL | 1 –º–∏–Ω | –°—Ä–µ–¥–Ω–∞ | –ù–µ |
| testExpirationReadOnly.ts | TS | 1-2 –º–∏–Ω | –í–∏—Å–æ–∫–∞ | –ü—ä–ª–Ω–∞ (–æ–ø—Ü–∏—è) |
| run-expiration-test.ps1 | PS | 2-3 –º–∏–Ω | –ù–∏—Å–∫–∞ | –ü—ä–ª–Ω–∞ |

---

## üõ†Ô∏è –ò–∑–∏—Å–∫–≤–∞–Ω–∏—è –∑–∞ –≤—Å–µ–∫–∏ —Ñ–∞–π–ª

### SQL —Ñ–∞–π–ª–æ–≤–µ (TEST_*.sql)
- ‚úÖ Supabase –ø—Ä–æ–µ–∫—Ç
- ‚úÖ –î–æ—Å—Ç—ä–ø –¥–æ SQL Editor –∏–ª–∏ psql
- ‚úÖ Service role –∏–ª–∏ postgres —Ä–æ–ª—è
- ‚úÖ 002_entitlement_functions.sql –∏–∑–ø—ä–ª–Ω–µ–Ω

### TypeScript —Ñ–∞–π–ª (testExpirationReadOnly.ts)
- ‚úÖ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ Supabase –∫–ª–∏–µ–Ω—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∞ —Å–µ—Å–∏—è
- ‚úÖ Browser DevTools

### PowerShell —Å–∫—Ä–∏–ø—Ç (run-expiration-test.ps1)
- ‚úÖ PowerShell 5.1+
- ‚úÖ Supabase CLI –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω
- ‚úÖ .env.local –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
- ‚úÖ Windows/Linux/Mac

---

## üìÖ Maintenance

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í—Å—è–∫–∞ —Å–µ–¥–º–∏—Ü–∞  
**–û–±–Ω–æ–≤—è–≤–∞–Ω–µ:** –ü—Ä–∏ –ø—Ä–æ–º–µ–Ω–∏ –≤ entitlement –ª–æ–≥–∏–∫–∞—Ç–∞  
**Cleanup:** –°–ª–µ–¥ –≤—Å–µ–∫–∏ —Ç–µ—Å—Ç

**–í–∞–∂–Ω–æ:** –¢–µ—Å—Ç–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω–∏ —Å–∞ –≤—Ä–µ–º–µ–Ω–Ω–∏ - –≤–∏–Ω–∞–≥–∏ cleanup —Å–ª–µ–¥ —Ç–µ—Å—Ç!

---

**–°—ä–∑–¥–∞–¥–µ–Ω–æ:** 2026-02-17  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-02-17
